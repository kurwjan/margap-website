---
import ContactOptions from "./ContactOptions.astro";
import Success from "../Success.astro";

const { service } = Astro.props
---

<section id="contact">
    <h1>
        Kontaktiere mich
    </h1>
    <div class="row">
        <form class="gform" method="POST" data-email="kontakt@margap.de" action="https://script.google.com/macros/s/AKfycbynxWlhrWMq6Ped73eQBzaQzl69P-ZdvTWa4jB01GG-JA9mdJ9DJpvYrbRCjRtZhNFXPw/exec">
            <h3>
                Ein Angebot anfragen
            </h3>
            <div class="row margin">
                <label>
                  <input required id="customer-name" name="Kundenname" autocomplete="name" placeholder="* Name" type="text" class="contact-input" />
                  Erforderlich: Ihr Name
                </label>
                <label>
                  <input required id="customer-mail" name="Kundenmail" autocomplete="email" placeholder="* E-Mail" type="email" class="contact-input" />
                  Erforderlich: Ihre E-Mail im abc@def.xyz Format
                </label>
            </div>
            <div class="row margin">
                <label>
                  <input required id="customer-number" name="Kundennummer" autocomplete="tel" placeholder="* Telefonnummer" type="tel" class="contact-input" />
                  Erforderlich: Ihre Telefonnummer
                </label>
                <label>
                  <select required id="service-type" value={ service? service : "" } name="Beanspruchter Service" autocomplete="off" class="contact-input dropdown-input">
                    { service? "" : <option value="" disabled selected>* Service auswählen</option> }
                    <ContactOptions selected={ service }/>
                  </select>
                  Erforderlich: Der Service den sie wollen.
                </label>
            </div>
            <label class="margin">
              <textarea required id="message" name="Nachricht" autocomplete="off" placeholder="* Nachricht mit Details...." rows="6" cols="48" class="message contact-input" />
              Erforderlich: Ein Text mit mehr Details zur Ihrer Anfrage.
            </label>
            <button id="send-request" type="submit" class="button-input" value="Anfrage einreichen">
                Anfrage einreichen
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" height="16" width="16" viewBox="0 0 512 512"><path fill="#ffe9e9" d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/></svg>
            </button>

            <Success />
        </form>
        <aside>
            <h3>
                Kontakt Info
            </h3>
            <hgroup>
                <h4>Meine Adresse</h4>
                <p>
                    Vorname Nachname<br>
                    Ottilia-Carolina-Moufang-Str. 26<br>
                    63075 Offenbach am Main<br>
                </p>
            </hgroup>
            <hgroup>
                <h4>Kontakt</h4>
                <p>
                    <b>Email:</b><br> <i>kontakt@xxxxxx</i><br>
                    <b>Telefonnummer:</b><br> <i>+49 xxxx xxxxxxxxx</i>
                </p>
            </hgroup>
            <hgroup>
                <h4>Öffnungszeiten</h4>
                <p>
                    Xxxxx - Xxxxx<br>
                    XX Uhr - XX Uhr
                </p>
            </hgroup>
        </aside>
    </div>
</section>

<style>
    section {
        display: flex;
        flex-direction: column;
        align-items: center;

        font-family: "Open Sans", sans-serif;
        color: rgb(232, 240, 255);

        background-image:
        linear-gradient(to bottom, rgba(232, 240, 255, 1), rgba(232, 240, 255, 0.35)),
        url("/images/test.png");
        background-position: center;
        background-size: cover;

        position: relative;

        z-index: 15;

        padding: 1.5em 1.5em 3em;
    }

    h1 {
        font-family: "Nunito", sans-serif;
        font-size: xx-large;

        margin-top: 2.5rem;

        color: rgb(0, 24, 49);
    }

    form {
        background-color: rgb(67, 88, 211);

        border-radius: 15px;

        padding: 0.5rem 2em 1.5rem;

        display: flex;
        flex-direction: column;
        
        width: max(50vw, 20em);
    }

    @media (max-width: 405px) {
        form {
            padding-left: 1.2em;
            padding-right: 1.2em;
        }
    }

    h3 {
        font-family: "Nunito", sans-serif;

        margin-left: 0;
        margin-bottom: 1.5rem;
    }

    .row {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 1em;

        justify-content: space-evenly;
        align-items: center;
    }

    label {
      display: flex;
      flex-direction: column;
      flex: auto;
      gap: 0.5em;

      font-size: 0.8rem;
    }

    .margin {
        margin-bottom: 1rem;
    }

    .contact-input {
        font-family: "Open Sans", sans-serif;

        background-color: rgb(229, 232, 255);

        color: rgb(0, 24, 49);

        border-radius: 10px;

        padding: 1rem 3.5rem 1rem 2rem;

        border: solid transparent;
        outline: none;
        box-shadow: none;
    }

    .contact-input:focus {
        border: solid rgba(176, 185, 255, 1);
    }

    .contact-input::placeholder {
        color: rgba(74, 87, 112, .75);
        opacity: 1;
    }

    .dropdown-input {
        appearance: none;

        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmlld0JveD0iMCAtMjU2IDE3OTIgMTc5MiIKICAgaWQ9InN2ZzI5ODkiCiAgIHZlcnNpb249IjEuMSIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC40OC4zLjEgcjk4ODYiCiAgIHdpZHRoPSIxMDAlIgogICBoZWlnaHQ9IjEwMCUiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImNhcmV0X2Rvd25fZm9udF9hd2Vzb21lLnN2ZyI+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMjk5OSI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGRlZnMKICAgICBpZD0iZGVmczI5OTciIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAiCiAgICAgZ3VpZGV0b2xlcmFuY2U9IjEwIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSI2NDAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iNDgwIgogICAgIGlkPSJuYW1lZHZpZXcyOTk1IgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIwLjEzMTY5NjQzIgogICAgIGlua3NjYXBlOmN4PSI4OTYiCiAgICAgaW5rc2NhcGU6Y3k9Ijg5NiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMjUiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJzdmcyOTg5IiAvPgogIDxnCiAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsLTEsNDAyLjQ0MDY4LDEyMzkuODY0NCkiCiAgICAgaWQ9ImcyOTkxIj4KICAgIDxwYXRoCiAgICAgICBkPSJtIDEwMjQsODMyIHEgMCwtMjYgLTE5LC00NSBMIDU1NywzMzkgcSAtMTksLTE5IC00NSwtMTkgLTI2LDAgLTQ1LDE5IEwgMTksNzg3IHEgLTE5LDE5IC0xOSw0NSAwLDI2IDE5LDQ1IDE5LDE5IDQ1LDE5IGggODk2IHEgMjYsMCA0NSwtMTkgMTksLTE5IDE5LC00NSB6IgogICAgICAgaWQ9InBhdGgyOTkzIgogICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgIHN0eWxlPSJmaWxsOiM0QjRCNzAiIC8+CiAgPC9nPgo8L3N2Zz4K);
        background-size: 18px;
        background-repeat: no-repeat;
        background-position: calc(100% - 1rem) center;

        padding-right: 5.7rem;
        flex-grow: 1;
    }

    .dropdown-input:invalid {
        color: rgb(74, 87, 112, .75);
    }

    .message {
        resize: none;
    }

    .button-input {
        font-family: "Open Sans", sans-serif;
        color: rgb(255, 233, 233);

        border: none;
        border-radius: 10px;

        padding: 1rem;

        background-color: rgb(218, 68, 68);
    }

    .button-input:hover {
        background-color: rgb(227, 94, 94);

        cursor: pointer;
    }

    .button-input:disabled {
        background-color: rgb(227, 94, 94);

        cursor: default;
    }

    aside {
        background-color: rgb(67, 88, 211);

        border-radius: 15px;

        padding: 0.5rem 2rem 1.5rem 2.0rem;

        display: flex;
        flex-direction: column;

        height: fit-content;
        
        flex-grow: 0.4;
    }

    h4 {
        font-family: "Nunito", sans-serif;
        margin-bottom: 0.5rem;
        margin-top: 1.0rem;
    }

    p {
        font-family: "Open Sans", sans-serif;
        margin-top: 0.5rem;
    }

    .icon {
        padding-left: 0.5rem;
        vertical-align: -3.4px;
    }

</style>